import { utils as ecUtils } from '@noble/secp256k1';
import { api, getAppState } from '../data/index.js';
import { deriveAccessGroupKeyPair, getSignedJWT, publicKeyToBase58Check, sha256X2, sign, uint64ToBufBigEndian, } from './crypto-utils.js';
export async function generateDerivedKeyPayload(ownerKeys, derivedKeys, transactionSpendingLimitObj, numDaysBeforeExpiration, network, { defaultMessagingGroupName } = {
    defaultMessagingGroupName: 'default-key',
}) {
    const { BlockHeight } = await getAppState();
    // days * (24 hours / day) * (60 minutes / hour) * (1 block / 5 minutes) = blocks
    const expirationBlockHeight = BlockHeight + (numDaysBeforeExpiration * 24 * 60) / 5;
    const ownerPublicKeyBase58 = publicKeyToBase58Check(ownerKeys.public, {
        network,
    });
    const derivedPublicKeyBase58 = publicKeyToBase58Check(derivedKeys.public, {
        network,
    });
    if (transactionSpendingLimitObj?.AccessGroupLimitMap) {
        transactionSpendingLimitObj.AccessGroupLimitMap.forEach((agl) => {
            if (!agl.AccessGroupOwnerPublicKeyBase58Check) {
                agl.AccessGroupOwnerPublicKeyBase58Check = ownerPublicKeyBase58;
            }
        });
    }
    if (transactionSpendingLimitObj?.AccessGroupMemberLimitMap) {
        transactionSpendingLimitObj.AccessGroupMemberLimitMap.forEach((agml) => {
            if (!agml.AccessGroupOwnerPublicKeyBase58Check) {
                agml.AccessGroupOwnerPublicKeyBase58Check = ownerPublicKeyBase58;
            }
        });
    }
    const { TransactionSpendingLimitHex } = await api.post('/api/v0/get-access-bytes', {
        DerivedPublicKeyBase58Check: derivedPublicKeyBase58,
        ExpirationBlock: expirationBlockHeight,
        TransactionSpendingLimit: transactionSpendingLimitObj,
    });
    const transactionSpendingLimitBytes = TransactionSpendingLimitHex
        ? ecUtils.hexToBytes(TransactionSpendingLimitHex)
        : [];
    const accessBytes = new Uint8Array([
        ...derivedKeys.public,
        ...uint64ToBufBigEndian(expirationBlockHeight),
        ...transactionSpendingLimitBytes,
    ]);
    const accessHashHex = ecUtils.bytesToHex(sha256X2(accessBytes));
    const [accessSignature] = await sign(accessHashHex, ownerKeys.private);
    const messagingKey = deriveAccessGroupKeyPair(ownerKeys.seedHex, defaultMessagingGroupName);
    const messagingPublicKeyBase58Check = publicKeyToBase58Check(messagingKey.public, { network });
    const messagingKeyHashHex = ecUtils.bytesToHex(sha256X2(new Uint8Array([
        ...messagingKey.public,
        ...new TextEncoder().encode(defaultMessagingGroupName),
    ])));
    const [messagingKeySignature] = await sign(messagingKeyHashHex, ownerKeys.private);
    const [jwt, derivedJwt] = await Promise.all([
        getSignedJWT(ownerKeys.seedHex, 'ES256', {}),
        getSignedJWT(ownerKeys.seedHex, 'ES256', {
            derivedPublicKeyBase58Check: derivedPublicKeyBase58,
        }),
    ]);
    return {
        derivedSeedHex: derivedKeys.seedHex,
        derivedPublicKeyBase58Check: derivedPublicKeyBase58,
        publicKeyBase58Check: ownerPublicKeyBase58,
        btcDepositAddress: 'Not implemented yet',
        ethDepositAddress: 'Not implemented yet',
        expirationBlock: expirationBlockHeight,
        network,
        accessSignature: ecUtils.bytesToHex(accessSignature),
        jwt,
        derivedJwt,
        messagingPublicKeyBase58Check,
        messagingPrivateKey: messagingKey.seedHex,
        messagingKeyName: defaultMessagingGroupName,
        messagingKeySignature: ecUtils.bytesToHex(messagingKeySignature),
        transactionSpendingLimitHex: TransactionSpendingLimitHex,
        signedUp: false,
        publicKeyAdded: ownerPublicKeyBase58,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVyaXZlZC1rZXktdXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaWRlbnRpdHkvZGVyaXZlZC1rZXktdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssSUFBSSxPQUFPLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUVwRCxPQUFPLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3BELE9BQU8sRUFDTCx3QkFBd0IsRUFDeEIsWUFBWSxFQUNaLHNCQUFzQixFQUN0QixRQUFRLEVBQ1IsSUFBSSxFQUNKLG9CQUFvQixHQUNyQixNQUFNLG1CQUFtQixDQUFDO0FBRzNCLE1BQU0sQ0FBQyxLQUFLLFVBQVUseUJBQXlCLENBQzdDLFNBQWtCLEVBQ2xCLFdBQW9CLEVBQ3BCLDJCQUE2RCxFQUM3RCx1QkFBK0IsRUFDL0IsT0FBZ0IsRUFDaEIsRUFBRSx5QkFBeUIsRUFBRSxHQUFHO0lBQzlCLHlCQUF5QixFQUFFLGFBQWE7Q0FDekM7SUFFRCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsTUFBTSxXQUFXLEVBQUUsQ0FBQztJQUU1QyxpRkFBaUY7SUFDakYsTUFBTSxxQkFBcUIsR0FDekIsV0FBVyxHQUFHLENBQUMsdUJBQXVCLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4RCxNQUFNLG9CQUFvQixHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUU7UUFDcEUsT0FBTztLQUNSLENBQUMsQ0FBQztJQUNILE1BQU0sc0JBQXNCLEdBQUcsc0JBQXNCLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtRQUN4RSxPQUFPO0tBQ1IsQ0FBQyxDQUFDO0lBQ0gsSUFBSSwyQkFBMkIsRUFBRSxtQkFBbUIsRUFBRTtRQUNwRCwyQkFBMkIsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFB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UUFDM0MscUJBQXFCLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQztRQUNoRSwyQkFBMkIsRUFBRSwyQkFBMkI7UUFDeEQsUUFBUSxFQUFFLEtBQUs7UUFDZixjQUFjLEVBQUUsb0JBQW9CO0tBQ3JDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXRpbHMgYXMgZWNVdGlscyB9IGZyb20gJ0Bub2JsZS9zZWNwMjU2azEnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0UmVzcG9uc2UgfSBmcm9tICcuLi9iYWNrZW5kLXR5cGVzL2luZGV4LmpzJztcbmltcG9ydCB7IGFwaSwgZ2V0QXBwU3RhdGUgfSBmcm9tICcuLi9kYXRhL2luZGV4LmpzJztcbmltcG9ydCB7XG4gIGRlcml2ZUFjY2Vzc0dyb3VwS2V5UGFpcixcbiAgZ2V0U2lnbmVkSldULFxuICBwdWJsaWNLZXlUb0Jhc2U1OENoZWNrLFxuICBzaGEyNTZYMixcbiAgc2lnbixcbiAgdWludDY0VG9CdWZCaWdFbmRpYW4sXG59IGZyb20gJy4vY3J5cHRvLXV0aWxzLmpzJztcbmltcG9ydCB7IEtleVBhaXIsIE5ldHdvcmsgfSBmcm9tICcuL3R5cGVzLmpzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRGVyaXZlZEtleVBheWxvYWQoXG4gIG93bmVyS2V5czogS2V5UGFpcixcbiAgZGVyaXZlZEtleXM6IEtleVBhaXIsXG4gIHRyYW5zYWN0aW9uU3BlbmRpbmdMaW1pdE9iajogVHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0UmVzcG9uc2UsXG4gIG51bURheXNCZWZvcmVFeHBpcmF0aW9uOiBudW1iZXIsXG4gIG5ldHdvcms6IE5ldHdvcmssXG4gIHsgZGVmYXVsdE1lc3NhZ2luZ0dyb3VwTmFtZSB9ID0ge1xuICAgIGRlZmF1bHRNZXNzYWdpbmdHcm91cE5hbWU6ICdkZWZhdWx0LWtleScsXG4gIH1cbikge1xuICBjb25zdCB7IEJsb2NrSGVpZ2h0IH0gPSBhd2FpdCBnZXRBcHBTdGF0ZSgpO1xuXG4gIC8vIGRheXMgKiAoMjQgaG91cnMgLyBkYXkpICogKDYwIG1pbnV0ZXMgLyBob3VyKSAqICgxIGJsb2NrIC8gNSBtaW51dGVzKSA9IGJsb2Nrc1xuICBjb25zdCBleHBpcmF0aW9uQmxvY2tIZWlnaHQgPVxuICAgIEJsb2NrSGVpZ2h0ICsgKG51bURheXNCZWZvcmVFeHBpcmF0aW9uICogMjQgKiA2MCkgLyA1O1xuICBjb25zdCBvd25lclB1YmxpY0tleUJhc2U1OCA9IHB1YmxpY0tleVRvQmFzZTU4Q2hlY2sob3duZXJLZXlzLnB1YmxpYywge1xuICAgIG5ldHdvcmssXG4gIH0pO1xuICBjb25zdCBkZXJpdmVkUHVibGljS2V5QmFzZTU4ID0gcHVibGljS2V5VG9CYXNlNThDaGVjayhkZXJpdmVkS2V5cy5wdWJsaWMsIHtcbiAgICBuZXR3b3JrLFxuICB9KTtcbiAgaWYgKHRyYW5zYWN0aW9uU3BlbmRpbmdMaW1pdE9iaj8uQWNjZXNzR3JvdXBMaW1pdE1hcCkge1xuICAgIHRyYW5zYWN0aW9uU3BlbmRpbmdMaW1pdE9iai5BY2Nlc3NHcm91cExpbWl0TWFwLmZvckVhY2goKGFnbCkgPT4ge1xuICAgICAgaWYgKCFhZ2wuQWNjZXNzR3JvdXBPd25lclB1YmxpY0tleUJhc2U1OENoZWNrKSB7XG4gICAgICAgIGFnbC5BY2Nlc3NHcm91cE93bmVyUHVibGljS2V5QmFzZTU4Q2hlY2sgPSBvd25lclB1YmxpY0tleUJhc2U1ODtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAodHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0T2JqPy5BY2Nlc3NHcm91cE1lbWJlckxpbWl0TWFwKSB7XG4gICAgdHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0T2JqLkFjY2Vzc0dyb3VwTWVtYmVyTGltaXRNYXAuZm9yRWFjaCgoYWdtbCkgPT4ge1xuICAgICAgaWYgKCFhZ21sLkFjY2Vzc0dyb3VwT3duZXJQdWJsaWNLZXlCYXNlNThDaGVjaykge1xuICAgICAgICBhZ21sLkFjY2Vzc0dyb3VwT3duZXJQdWJsaWNLZXlCYXNlNThDaGVjayA9IG93bmVyUHVibGljS2V5QmFzZTU4O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHsgVHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0SGV4IH0gPSBhd2FpdCBhcGkucG9zdChcbiAgICAnL2FwaS92MC9nZXQtYWNjZXNzLWJ5dGVzJyxcbiAgICB7XG4gICAgICBEZXJpdmVkUHVibGljS2V5QmFzZTU4Q2hlY2s6IGRlcml2ZWRQdWJsaWNLZXlCYXNlNTgsXG4gICAgICBFeHBpcmF0aW9uQmxvY2s6IGV4cGlyYXRpb25CbG9ja0hlaWdodCxcbiAgICAgIFRyYW5zYWN0aW9uU3BlbmRpbmdMaW1pdDogdHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0T2JqLFxuICAgIH1cbiAgKTtcbiAgY29uc3QgdHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0Qnl0ZXMgPSBUcmFuc2FjdGlvblNwZW5kaW5nTGltaXRIZXhcbiAgICA/IGVjVXRpbHMuaGV4VG9CeXRlcyhUcmFuc2FjdGlvblNwZW5kaW5nTGltaXRIZXgpXG4gICAgOiBbXTtcbiAgY29uc3QgYWNjZXNzQnl0ZXMgPSBuZXcgVWludDhBcnJheShbXG4gICAgLi4uZGVyaXZlZEtleXMucHVibGljLFxuICAgIC4uLnVpbnQ2NFRvQnVmQmlnRW5kaWFuKGV4cGlyYXRpb25CbG9ja0hlaWdodCksXG4gICAgLi4udHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0Qnl0ZXMsXG4gIF0pO1xuICBjb25zdCBhY2Nlc3NIYXNoSGV4ID0gZWNVdGlscy5ieXRlc1RvSGV4KHNoYTI1NlgyKGFjY2Vzc0J5dGVzKSk7XG4gIGNvbnN0IFthY2Nlc3NTaWduYXR1cmVdID0gYXdhaXQgc2lnbihhY2Nlc3NIYXNoSGV4LCBvd25lcktleXMucHJpdmF0ZSk7XG4gIGNvbnN0IG1lc3NhZ2luZ0tleSA9IGRlcml2ZUFjY2Vzc0dyb3VwS2V5UGFpcihcbiAgICBvd25lcktleXMuc2VlZEhleCxcbiAgICBkZWZhdWx0TWVzc2FnaW5nR3JvdXBOYW1lXG4gICk7XG4gIGNvbnN0IG1lc3NhZ2luZ1B1YmxpY0tleUJhc2U1OENoZWNrID0gcHVibGljS2V5VG9CYXNlNThDaGVjayhcbiAgICBtZXNzYWdpbmdLZXkucHVibGljLFxuICAgIHsgbmV0d29yayB9XG4gICk7XG4gIGNvbnN0IG1lc3NhZ2luZ0tleUhhc2hIZXggPSBlY1V0aWxzLmJ5dGVzVG9IZXgoXG4gICAgc2hhMjU2WDIoXG4gICAgICBuZXcgVWludDhBcnJheShbXG4gICAgICAgIC4uLm1lc3NhZ2luZ0tleS5wdWJsaWMsXG4gICAgICAgIC4uLm5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkZWZhdWx0TWVzc2FnaW5nR3JvdXBOYW1lKSxcbiAgICAgIF0pXG4gICAgKVxuICApO1xuICBjb25zdCBbbWVzc2FnaW5nS2V5U2lnbmF0dXJlXSA9IGF3YWl0IHNpZ24oXG4gICAgbWVzc2FnaW5nS2V5SGFzaEhleCxcbiAgICBvd25lcktleXMucHJpdmF0ZVxuICApO1xuXG4gIGNvbnN0IFtqd3QsIGRlcml2ZWRKd3RdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNpZ25lZEpXVChvd25lcktleXMuc2VlZEhleCwgJ0VTMjU2Jywge30pLFxuICAgIGdldFNpZ25lZEpXVChvd25lcktleXMuc2VlZEhleCwgJ0VTMjU2Jywge1xuICAgICAgZGVyaXZlZFB1YmxpY0tleUJhc2U1OENoZWNrOiBkZXJpdmVkUHVibGljS2V5QmFzZTU4LFxuICAgIH0pLFxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIGRlcml2ZWRTZWVkSGV4OiBkZXJpdmVkS2V5cy5zZWVkSGV4LFxuICAgIGRlcml2ZWRQdWJsaWNLZXlCYXNlNThDaGVjazogZGVyaXZlZFB1YmxpY0tleUJhc2U1OCxcbiAgICBwdWJsaWNLZXlCYXNlNThDaGVjazogb3duZXJQdWJsaWNLZXlCYXNlNTgsXG4gICAgYnRjRGVwb3NpdEFkZHJlc3M6ICdOb3QgaW1wbGVtZW50ZWQgeWV0JyxcbiAgICBldGhEZXBvc2l0QWRkcmVzczogJ05vdCBpbXBsZW1lbnRlZCB5ZXQnLFxuICAgIGV4cGlyYXRpb25CbG9jazogZXhwaXJhdGlvbkJsb2NrSGVpZ2h0LFxuICAgIG5ldHdvcmssXG4gICAgYWNjZXNzU2lnbmF0dXJlOiBlY1V0aWxzLmJ5dGVzVG9IZXgoYWNjZXNzU2lnbmF0dXJlKSxcbiAgICBqd3QsXG4gICAgZGVyaXZlZEp3dCxcbiAgICBtZXNzYWdpbmdQdWJsaWNLZXlCYXNlNThDaGVjayxcbiAgICBtZXNzYWdpbmdQcml2YXRlS2V5OiBtZXNzYWdpbmdLZXkuc2VlZEhleCxcbiAgICBtZXNzYWdpbmdLZXlOYW1lOiBkZWZhdWx0TWVzc2FnaW5nR3JvdXBOYW1lLFxuICAgIG1lc3NhZ2luZ0tleVNpZ25hdHVyZTogZWNVdGlscy5ieXRlc1RvSGV4KG1lc3NhZ2luZ0tleVNpZ25hdHVyZSksXG4gICAgdHJhbnNhY3Rpb25TcGVuZGluZ0xpbWl0SGV4OiBUcmFuc2FjdGlvblNwZW5kaW5nTGltaXRIZXgsXG4gICAgc2lnbmVkVXA6IGZhbHNlLFxuICAgIHB1YmxpY0tleUFkZGVkOiBvd25lclB1YmxpY0tleUJhc2U1OCxcbiAgfTtcbn1cbiJdfQ==